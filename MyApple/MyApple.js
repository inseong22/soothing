/* eslint-disable require-yield, eqeqeq */

import {
  Sprite,
  Trigger,
  Watcher,
  Costume,
  Color,
  Sound
} from "https://unpkg.com/leopard@^1/dist/index.esm.js";

export default class MyApple extends Sprite {
  constructor(...args) {
    super(...args);

    this.costumes = [
      new Costume("my apple", "./MyApple/costumes/my apple.png", {
        x: 218.5,
        y: 338.5
      })
    ];

    this.sounds = [];

    this.triggers = [
      new Trigger(Trigger.GREEN_FLAG, this.whenGreenFlagClicked),
      new Trigger(Trigger.GREEN_FLAG, this.whenGreenFlagClicked2)
    ];
  }

  *whenGreenFlagClicked() {
    while (true) {
      if (this.keyPressed("up arrow")) {
        this.y += 10;
      }
      if (this.keyPressed("down arrow")) {
        this.y -= 10;
      }
      if (this.keyPressed("right arrow")) {
        this.x += 10;
      }
      if (this.keyPressed("left arrow")) {
        this.x -= 10;
      }
      if (this.compare(-180, this.y) > 0) {
        this.y = -180;
      }
      if (this.compare(this.x, 240) > 0) {
        this.x = 240;
      }
      if (this.compare(this.y, 180) > 0) {
        this.y = 180;
      }
      if (this.compare(-240, this.x) > 0) {
        this.x = -240;
      }
      if (
        this.compare(this.timer, 8) > 0 &&
        this.compare(this.timer, 16) < 0 &&
        this.toNumber(this.stage.vars.Score) === 0
      ) {
        if (this.keyPressed("right arrow")) {
          this.x -= 20;
        }
        if (this.keyPressed("left arrow")) {
          this.x += 20;
        }
      }
      if (
        this.compare(this.timer, 8) > 0 &&
        this.compare(this.timer, 16) < 0 &&
        this.toNumber(this.stage.vars.Score) === 1
      ) {
        if (this.keyPressed("up arrow")) {
          this.y -= 20;
        }
        if (this.keyPressed("down arrow")) {
          this.y += 20;
        }
      }
      if (this.compare(this.timer, 16) > 0) {
        yield* this.wait(3);
      }
      if (this.compare(this.timer, 19) > 0) {
    this.restartTimer();
    this.stage.vars.Score = this.random(0, 1);

      if (this.stage.vars.sequence2.length > 0) {
          // Remove the first element from sequence2
          this.stage.vars.sequence2.shift();
        
          // Check if there are still elements in sequence2
          if (this.stage.vars.sequence2.length > 0) {
              // Assign the value of the next index to this.stage.vars.var1
              this.stage.vars.var1 = this.stage.vars.sequence2[0];
          } else {
              yield* this.broadcastAndWait("game over");
              break;
          }
        }
      }
      yield;
    }
  }

  *whenGreenFlagClicked2() {
    // Access the input value inside the function
    var inputValue = window.myInputValue;
    console.log("Input Value inside MyApple:", inputValue);
      
    var last3Digits = parseInt(inputValue.slice(-3).replace(/^0+/, ''));

    console.log("Last 3 Digits:", last3Digits);

    // Rest of code
    this.stage.vars.sequence = [
        [6,41,1,43,9,40,15,48,30,54,27,70,33,67,32,56,25,72],
        [7,38,11,40,9,48,3,46,30,54,34,58,21,68,27,56,35,64],
        [18,47,14,52,3,38,13,37,32,46,19,61,20,67,33,71,27,59],   
        [18,47,15,38,13,41,14,46,35,53,19,67,36,56,26,64,29,70],
        [12,37,18,44,13,52,2,45,33,41,24,61,30,63,35,62,22,68],
        [1,46,6,39,2,49,7,41,36,48,28,57,26,61,33,63,32,70],
        [1,47,5,44,16,48,13,43,33,40,28,72,29,71,23,67,34,66],
        [5,40,2,49,9,50,18,51,31,53,20,68,23,61,26,65,36,64],
        [5,45,10,53,7,47,16,44,31,54,36,70,35,57,29,66,25,55],
        [3,47,13,38,7,54,8,41,19,51,21,64,22,69,24,62,35,70],
        [14,39,9,38,13,37,12,52,27,51,25,68,21,71,33,66,22,67],
        [4,50,13,46,15,44,6,53,34,52,23,69,20,57,26,71,36,61],
        [8,40,6,50,10,51,17,37,27,49,35,61,22,70,23,60,30,69],
        [3,41,17,46,7,40,18,48,35,37,30,68,33,55,24,58,27,59],
        [4,37,3,50,6,51,18,47,31,44,32,69,24,65,34,59,20,57],
        [1,44,3,53,7,48,11,46,36,42,30,62,31,60,33,71,25,65],
        [14,54,4,49,5,45,1,48,28,39,20,69,19,70,31,61,24,66],
        [15,39,8,46,16,47,18,41,23,48,33,65,21,68,30,62,31,63],
        [11,41,1,40,2,49,14,42,22,46,36,62,21,61,30,59,19,71],
        [9,44,7,39,5,54,12,47,22,38,29,62,31,68,20,64,33,70],
        [3,46,1,40,5,47,8,54,32,49,27,55,30,64,26,59,29,58],
        [8,41,18,50,15,38,10,43,31,39,33,57,19,70,28,68,25,71],
        [9,40,18,49,2,42,3,47,36,53,35,62,20,59,22,69,27,67],
        [2,37,15,48,5,45,17,46,23,40,29,69,26,60,25,68,31,63],
        [3,38,7,52,13,44,1,40,21,46,25,56,29,70,35,58,26,66],
        [18,50,15,52,6,41,11,48,33,40,30,55,23,72,26,71,31,61],
        [7,51,4,45,16,54,5,44,24,47,23,66,32,63,26,57,33,67],
        [12,43,16,40,13,45,18,44,20,39,19,70,36,69,21,68,24,63],
        [11,51,18,46,9,44,2,49,24,41,30,63,19,65,21,62,34,58],
        [16,41,9,39,10,49,14,47,28,54,34,66,31,69,32,65,27,71],
        [13,40,9,47,16,44,18,39,30,48,20,72,22,70,24,69,28,63],
        [11,49,12,46,3,45,18,51,36,38,23,67,30,58,29,70,32,64],
        [9,54,12,44,3,42,16,40,25,41,27,55,36,65,33,68,30,58],
        [1,53,2,40,15,49,6,47,24,41,31,56,21,69,23,62,27,70],
        [12,47,16,40,14,54,17,49,33,43,23,64,25,68,24,66,26,57],
        [11,45,5,43,17,49,15,44,24,37,22,71,32,56,19,65,30,62],
        [1,53,18,48,8,46,9,41,24,42,31,55,21,63,36,66,34,69],
        [13,52,7,48,5,50,9,46,24,51,33,55,32,62,21,59,31,58],
        [11,43,9,49,4,52,18,38,22,50,28,68,30,62,34,71,27,69],
        [1,48,3,50,16,41,6,44,29,49,34,55,35,57,25,67,23,66],
        [18,45,11,43,14,49,2,39,22,42,20,67,19,63,30,72,33,59],
        [14,40,15,52,3,37,8,48,32,41,19,57,35,65,33,60,20,72],
        [10,47,6,48,17,38,4,39,31,51,32,63,24,69,30,61,20,57],
        [6,43,8,41,15,47,17,37,30,52,34,64,22,61,27,69,36,71],
        [18,49,7,50,6,38,9,51,31,37,19,66,20,62,29,63,28,61],
        [7,48,14,54,1,52,11,42,30,51,24,68,21,72,33,65,27,64],
        [9,40,17,37,3,42,14,47,26,43,23,67,29,72,34,68,28,69],
        [16,39,10,51,8,48,6,43,23,40,26,61,27,57,24,56,31,65],
        [17,45,10,40,18,42,5,37,31,50,19,63,23,65,26,61,28,70],
        [2,43,16,50,1,42,9,49,34,40,36,68,33,57,26,66,22,61],
        [8,48,5,43,4,49,14,45,36,54,28,71,29,68,33,56,19,62],
        [12,47,1,39,4,51,5,46,27,50,29,56,24,68,22,72,23,57],
        [17,40,11,46,3,45,15,52,36,38,34,61,35,60,21,66,23,58],
        [15,42,14,54,17,49,2,37,22,40,31,64,24,63,21,55,36,69],
        [2,49,8,42,18,47,7,52,25,45,24,69,35,64,27,72,21,56],
        [8,41,16,42,1,43,15,46,26,54,30,64,19,61,31,72,27,56],
        [9,47,3,37,10,38,13,54,36,52,24,55,32,56,28,70,29,66],
        [14,52,6,49,4,45,10,48,35,51,30,72,33,64,31,61,32,65],
        [4,51,12,49,9,52,18,47,33,46,22,66,25,55,29,68,26,59],
        [1,39,18,47,5,38,8,49,22,43,21,67,19,60,36,71,34,61],
        [1,39,14,52,18,40,11,44,19,48,29,59,36,63,26,70,32,60],
        [2,49,16,47,8,53,9,37,34,50,31,58,27,56,23,72,35,65],
        [17,51,3,38,13,52,8,50,34,43,25,68,35,69,23,65,20,66],
        [16,49,5,47,14,39,10,38,26,37,21,60,19,66,34,67,29,58],
        [10,37,5,42,11,50,12,54,27,53,29,62,33,64,25,71,30,70],
        [13,45,6,52,14,43,2,51,35,53,28,57,19,62,36,58,33,70],
        [12,44,14,53,15,47,3,43,32,49,36,71,23,57,19,56,27,67],
        [9,44,6,54,14,41,16,46,19,39,23,63,29,64,20,67,33,68],
        [4,48,3,44,14,51,5,53,36,52,27,55,34,69,26,57,30,59],
        [16,50,9,53,11,49,3,38,26,41,28,60,36,57,23,55,32,61],
        [11,52,2,40,6,48,7,53,36,46,27,71,23,69,24,58,29,70],
        [16,37,18,50,13,46,3,53,28,51,30,57,31,56,22,62,36,69],
        [11,44,2,41,14,40,7,54,27,52,33,55,29,71,20,72,24,58],
        [4,43,12,37,9,54,6,49,35,50,30,63,34,56,28,58,23,65],
        [8,46,5,45,17,54,4,48,31,37,19,57,22,69,23,71,30,65],
        [12,52,9,49,15,38,14,54,7,59,24,61,19,58,27,66,33,72],
        [12,40,16,50,3,38,9,46,17,56,25,58,29,66,27,64,21,72],
        [14,43,1,49,2,53,15,41,9,65,36,70,32,56,21,55,31,64],
        [17,49,1,38,18,46,8,52,11,65,36,56,33,59,31,64,32,71],
        [15,43,6,45,12,44,17,50,4,55,30,62,36,70,31,63,20,59],
        [18,39,10,43,8,45,15,52,14,64,19,57,24,67,20,59,25,66],
        [15,54,10,53,11,49,5,48,16,65,19,62,23,66,34,61,31,58],
        [13,50,2,43,5,47,8,46,18,58,23,67,20,68,27,69,36,71],
        [13,52,18,39,17,48,11,37,7,63,23,71,28,65,25,62,34,72],
        [1,46,3,51,4,44,6,52,17,65,21,56,31,72,25,59,26,69],
        [9,50,7,53,3,48,15,49,4,57,32,56,27,55,31,70,30,69],
        [16,51,5,39,2,53,8,43,18,68,22,64,31,62,33,71,24,70],
        [9,43,17,52,4,42,5,51,12,58,26,68,24,69,28,55,35,67],
        [17,50,12,37,15,40,6,41,9,59,21,64,35,58,25,66,36,55],
        [13,51,14,47,6,41,16,39,2,55,22,68,21,69,24,65,36,62],
        [18,44,12,42,13,53,15,47,7,62,19,71,21,66,25,64,29,60],
        [10,51,2,52,1,43,13,48,6,72,32,67,22,63,23,66,19,57],
        [5,47,15,50,3,44,12,45,13,57,33,64,26,65,34,59,36,66],
        [4,44,18,43,3,41,12,53,1,59,29,58,19,67,20,60,32,64],
        [4,44,11,50,13,46,2,52,15,62,27,57,25,72,23,65,30,56],
        [14,37,9,46,12,41,8,40,11,64,21,58,19,65,23,72,26,67],
        [13,39,15,52,1,50,10,53,7,59,26,68,36,56,33,61,28,57],
        [18,44,17,41,2,51,4,49,9,58,27,67,36,60,20,65,21,71],
        [5,51,11,42,8,50,7,45,13,55,20,66,33,63,23,64,35,58],
        [3,38,7,52,11,40,17,48,8,56,21,70,25,62,31,58,19,64],
        [15,37,12,54,5,53,8,43,13,68,36,70,33,59,24,66,29,58],
        [6,48,5,45,14,39,8,49,15,69,25,63,22,72,34,62,23,65],
        [2,52,1,51,18,50,3,45,6,61,30,58,34,63,31,62,36,57],
        [6,45,12,47,1,44,3,40,16,69,29,64,36,62,27,67,20,59],
        [10,48,16,51,13,47,14,53,9,59,34,57,27,67,28,65,32,72],
        [12,54,2,52,4,51,6,45,10,58,31,65,27,62,34,57,36,66],
        [18,49,5,40,12,52,11,46,14,67,29,64,30,63,21,69,36,56],
        [7,37,9,47,18,50,15,40,12,72,27,62,30,60,21,58,34,59],
        [6,38,13,51,3,44,5,52,9,71,19,58,20,67,33,65,24,59],
        [15,46,5,50,7,48,6,39,8,65,30,58,34,72,32,67,35,61],
        [6,53,4,38,14,47,1,44,12,63,29,61,23,67,35,62,33,55],
        [6,37,13,45,3,48,18,51,16,71,19,66,36,64,26,59,27,60],
        [6,37,15,44,14,41,3,40,13,70,31,66,25,68,23,64,27,69],
        [4,50,10,44,12,53,16,51,9,61,29,67,27,70,22,56,36,68],
        [11,37,16,39,17,49,7,48,5,66,19,68,21,59,34,62,24,67],
        [4,49,2,45,1,54,12,41,15,63,36,61,29,67,32,57,20,60],
        [14,39,1,47,17,42,15,54,2,58,32,70,33,55,21,66,26,59],
        [13,45,14,51,6,43,12,39,2,65,28,66,24,56,35,57,22,69],
        [12,46,16,43,4,51,9,53,18,61,24,59,26,65,33,55,35,70],
        [13,48,1,44,2,45,11,43,10,67,36,68,25,56,24,69,27,55],
        [12,50,6,54,3,47,15,46,9,66,25,72,32,70,19,60,29,69],
        [8,49,5,54,11,50,16,51,10,58,27,55,35,60,21,65,32,61],
        [5,43,8,39,9,38,6,47,13,57,34,69,28,66,26,61,24,58],
        [13,45,1,47,5,43,8,52,10,63,35,58,28,60,36,55,23,68],
        [16,50,18,39,15,48,8,43,4,61,20,68,34,60,19,67,27,58],
        [18,53,10,50,11,38,15,44,1,66,26,61,23,67,22,63,32,72],
        [9,38,11,50,6,54,4,39,5,65,30,57,19,69,22,64,23,68],
        [18,43,16,42,17,48,3,40,5,58,35,64,29,63,21,70,33,56],
        [4,46,13,45,6,37,3,51,18,60,33,72,32,67,35,55,20,58],
        [7,51,6,46,17,54,9,38,3,67,20,60,26,65,36,70,25,63],
        [8,46,12,43,1,54,13,38,9,59,26,60,34,61,19,64,33,72],
        [18,37,6,38,14,52,10,48,11,65,27,55,21,56,28,72,31,70],
        [17,54,12,46,15,43,13,47,14,70,32,67,24,63,22,66,28,69],
        [15,48,4,37,7,50,11,41,8,69,22,67,30,70,27,65,36,64],
        [4,49,3,42,1,53,18,43,16,57,19,65,36,56,23,67,26,61],
        [1,41,11,45,18,52,8,42,14,57,19,70,32,58,36,62,29,66],
        [16,40,13,38,9,54,5,47,17,67,20,65,34,71,26,55,27,68],
        [16,50,7,51,17,47,5,48,2,69,35,56,21,70,31,68,26,61],
        [8,42,3,48,1,49,16,40,11,67,34,65,23,57,32,56,28,55],
        [9,44,11,46,15,53,7,52,12,55,28,60,23,68,29,72,30,71],
        [17,39,10,44,1,40,18,52,15,63,31,70,24,61,32,69,20,71],
        [14,53,18,39,5,38,1,49,9,62,30,71,32,65,33,61,21,67],
        [1,45,5,46,11,49,2,50,15,62,27,72,24,59,32,64,34,57],
        [18,37,9,51,16,39,8,41,12,66,22,62,21,69,32,71,23,70],
        [8,42,10,39,18,37,5,43,14,68,34,71,27,67,29,56,21,59],
        [18,53,9,51,5,40,6,52,11,70,29,58,20,66,24,71,25,64],
        [10,39,12,38,13,44,4,51,18,55,34,68,36,64,31,71,21,69],
        [9,37,15,53,11,54,2,40,6,62,29,59,20,58,32,72,25,70],
        [17,45,12,38,16,40,10,47,5,61,22,55,30,72,27,67,24,68],
        [13,39,1,51,4,53,5,47,12,64,26,63,23,72,35,66,22,55]
    ];
    this.stage.vars.sequence2 = this.stage.vars.sequence[last3Digits-1];
    this.stage.vars.life = 0;
    this.stage.vars.score = 0;
    this.stage.vars.time = this.random(1, 10);
    this.stage.vars.Score = this.random(0, 1);
    this.stage.vars.var1 = this.stage.vars.sequence2[0];
  }
}